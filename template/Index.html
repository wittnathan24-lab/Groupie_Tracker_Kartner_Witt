<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Groupie Tracker</title>
    <link rel="stylesheet" href="/static/css/global.css">
</head>
<body class="{{if .DarkMode}}dark-mode{{end}}">

<header class="main-header">
    <div class="header-container">
        <div style="font-weight: bold; font-size: 1.2rem;">ğŸµ GroupieTracker</div>
        <a href="/toggle-theme" class="theme-btn">
            {{if .DarkMode}}â˜€ï¸ Mode Clair{{else}}ğŸŒ™ Mode Sombre{{end}}
        </a>
    </div>
</header>

<div class="page">
    <div class="card">
        <h1>Bienvenue sur Groupie Tracker</h1>
        <p style="opacity: 0.7;">Rechercher un artiste</p>
        <div class="search">
            <input id="searchInput" class="search__input" type="text" placeholder="Queen, Metallica...">
            <div id="suggestions" class="suggestions" hidden></div>
        </div>
        <a class="btn-secondary" href="/Liste">Aller Ã  la liste</a>
        <div style="margin-top: 30px; font-size: 0.8rem; opacity: 0.5;">
            Groupie Tracker - WK - 2026
        </div>
    </div>
</div>

<script>
    (function(){
        const input = document.getElementById('searchInput');
        const box = document.getElementById('suggestions');
        input.addEventListener('input', async () => {
            const q = input.value.trim();
            if(!q) { box.hidden = true; return; }
            const res = await fetch('/api/search?q=' + q);
            const data = await res.json();
            if(data.length > 0) {
                box.innerHTML = data.map(it => `
                <div style="display:flex; align-items:center; gap:10px; padding:10px; cursor:pointer;" onclick="window.location.href='/Artiste/${it.id}'">
                    <img src="${it.image}" style="width:30px; height:30px; border-radius:50%;">
                    <span>${it.name}</span>
                </div>`).join('');
                box.hidden = false;
            } else { box.hidden = true; }
        });
    })();
</script>
</body>
</html>